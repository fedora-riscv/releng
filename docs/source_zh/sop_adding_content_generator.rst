.. SPDX-License-Identifier:    CC-BY-SA-3.0

======================
添加新的koji内容生成器
======================

说明
====
Koji不久前增加了对内容生成器的支持。内容生成器的基本前提是，它允许我们在不影响或更改核心Koji代码的情况
下为新类型的内容创建构建系统，并在某种程度上简化与发布工具链其他部分的集成。有关内容生成器、背景、需求
等的更多信息，请参阅 `内容生成器文档`_ 。

要使内容生成器能够在Koji中创建/导入构建，必须满足以下先决条件：

* Koji必须识别内容生成器类型
* 执行内容生成器导入的用户必须具有此操作的权限
* 任何新的内容类型都必须在Koji中定义

要问的问题
==========
在启用内容生成器/将其添加到Koji之前，需要回答一些问题

* 内容生成器服务在哪里运行，它的支持状态如何？
* 是添加了新类型的内容，还是内容生成器提供了Koji已经知道的不同的构建内容的方式？
* 将导入Koji的内容的预期大小是多少？
* 内容生成器是否遵循上述Koji文档中的每一项编写要求？


在koji中添加新的内容生成器
==========================

首先，我们创建内容生成器，并授予用户对其进行导入的权限：

:: 
    
    koji grant-cg-access <username> <content_generator_name> --new

在许多情况下，内容生成器将添加具有新内容类型的内容。这可以简单地通过运行来实现：

::

    koji call addBType <content type>


解释
----
* username - 是将要进行导入的用户的名称。在大多数情况下，这将是一个服务级别的帐户
* content generator name - 此名称必须由内容生成器开发团队提供
* --new - 此开关可确保在内容生成器不存在的情况下创建该生成器


.. _内容生成器文档: https://docs.pagure.org/koji/content_generators/
